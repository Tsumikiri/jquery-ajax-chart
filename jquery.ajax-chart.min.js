!function(a){function b(b,c){return a(b).data(a.fn.achart.dataKeys.wrapper)}function c(a,c){return b(a,c).getChart()}function d(a,b){return c(a,b).getImageURI()}function e(a,c){b(a,c).draw()}function f(b){var c=a(b).attr("id");return"undefined"==typeof c||c===!1?(f.next=++f.next||1,a(b).attr("id",a.fn.achart.autoIdPrefix+f.next),a(b).attr("id")):c}function g(b,d,e){d=d||a.fn.achart.defaults.init.type,e=e||a.fn.achart.defaults.init.opts;var g=new google.visualization.ChartWrapper({chartType:d,containerId:f(b),options:e});a(b).data(a.fn.achart.dataKeys.wrapper,g),google.visualization.events.addOneTimeListener(g,"ready",function(){google.visualization.events.addListener(g,"ready",function(){a(b).trigger("achart.ready",arguments)}),google.visualization.events.addListener(g,"select",function(){a(b).trigger("achart.select",c(b).getSelection(),arguments)}),google.visualization.events.addListener(g.getChart(),"error",function(){a(b).trigger("achart.error",arguments)})})}function h(c,d,f){var g=b(c),h=a(c).data(a.fn.achart.dataKeys.hasData);f=f||a.fn.achart.defaults.update.overwrite,d=f?d:a.extend(!0,{},g.getOptions(),d),g.setOptions(d),h&&e(c)}function i(c,d,f){var g=b(c);return f=f||a.fn.achart.defaults.load.expect,d.dataType=a.fn.achart.defaults.load.ajax.dataType,a(c).data(a.fn.achart.dataKeys.lastAjax,d),a(c).data(a.fn.achart.dataKeys.lastExpect,f),a.ajax(d).done(function(b){g.setDataTable(new google.visualization.DataTable(b[f])),e(c),a(c).data(a.fn.achart.dataKeys.hasData,!0)})}function j(b,c,d){var e=a(b).data(a.fn.achart.dataKeys.lastAjax)||{},f=a(b).data(a.fn.achart.dataKeys.lastExpect)||a.fn.achart.defaults.load.expect;return a.extend(!0,e,c),i(b,e,f)}function k(a,b){return b?c(a).setSelection(b):b=c(a).getSelection(),b}a.fn.achart=function(a,f,l){return"wrapper"===a?b(this):"chart"===a?c(this):"image"===a?d(this):"load"===a?i(this,f,l):"reload"===a?j(this,f,l):"select"===a?k(this,f):this.each(function(){"draw"===a?e(this):"update"===a?h(this,f,l):"init"===a&&g(this,f,l)})},a.achart=function(){var b=arguments;google.charts.setOnLoadCallback(function(){a.each(b,function(b,c){a.isFunction(c)&&c()})})},a.fn.achart.autoIdPrefix="achart-autoid-",a.fn.achart.dataKeys={wrapper:"achart-wrapper",hasData:"achart-hasdata",lastAjax:"achart-lastajax",lastExpect:"achart-lastexpect"},a.fn.achart.defaults={init:{type:"PieChart",opts:{}},update:{overwrite:!1},load:{ajax:{dataType:"json"},expect:"data"}}}(jQuery);
