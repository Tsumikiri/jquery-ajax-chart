!function(a){function t(t){return a(t).data(a.fn.achart.dataKeys.wrapper)}function e(a){return t(a).getChart()}function n(a){return e(a).getImageURI()}function r(a){t(a).draw()}function i(t){var e=a(t).attr("id");return"undefined"==typeof e||e===!1?(i.next=++i.next||1,a(t).attr("id",a.fn.achart.autoIdPrefix+i.next),a(t).attr("id")):e}function s(t,n,r){n=n||a.fn.achart.defaults.init.type,r=r||a.fn.achart.defaults.init.opts;var s=new google.visualization.ChartWrapper({chartType:n,containerId:i(t),options:r});a(t).data(a.fn.achart.dataKeys.wrapper,s),google.visualization.events.addOneTimeListener(s,"ready",function(){google.visualization.events.addListener(s,"ready",function(){a(t).trigger("achart.ready",arguments)}),google.visualization.events.addListener(s,"select",function(){a(t).trigger("achart.select",e(t).getSelection(),arguments)}),google.visualization.events.addListener(s.getChart(),"error",function(){a(t).trigger("achart.error",arguments)})})}function o(e,n,i){var s=t(e),o=a(e).data(a.fn.achart.dataKeys.hasData);i=i||a.fn.achart.defaults.update.overwrite,n=i?n:a.extend(!0,{},s.getOptions(),n),s.setOptions(n),o&&r(e)}function c(e,n,i){var s=t(e);return i=i||a.fn.achart.defaults.load.expect,n.dataType=a.fn.achart.defaults.load.ajax.dataType,a(e).data(a.fn.achart.dataKeys.lastAjax,n),a(e).data(a.fn.achart.dataKeys.lastExpect,i),a.ajax(n).done(function(t){s.setDataTable(new google.visualization.DataTable(t[i])),r(e),a(e).data(a.fn.achart.dataKeys.hasData,!0)})}function d(t,e,n){var r=a(t).data(a.fn.achart.dataKeys.lastAjax)||{},i=a(t).data(a.fn.achart.dataKeys.lastExpect)||a.fn.achart.defaults.load.expect;return a.extend(!0,r,e),c(t,r,i)}function u(a,t){return t?e(a).setSelection(t):t=e(a).getSelection(),t}function f(t){return a(t).data(a.fn.achart.dataKeys.wrapper)instanceof google.visualization.ChartWrapper}a.fn.achart=function(a,i,h){return"wrapper"===a?t(this):"chart"===a?e(this):"image"===a?n(this):"load"===a?c(this,i,h):"reload"===a?d(this,i,h):"select"===a?u(this,i):"verify"===a?f(this):this.each(function(){"draw"===a?r(this):"update"===a?o(this,i,h):"init"===a&&s(this,i,h)})},a.achart=function(){var t=arguments;google.charts.setOnLoadCallback(function(){a.each(t,function(t,e){a.isFunction(e)&&e()})})},a.fn.achart.autoIdPrefix="achart-autoid-",a.fn.achart.dataKeys={wrapper:"achart-wrapper",hasData:"achart-hasdata",lastAjax:"achart-lastajax",lastExpect:"achart-lastexpect"},a.fn.achart.defaults={init:{type:"PieChart",opts:{}},update:{overwrite:!1},load:{ajax:{dataType:"json"},expect:"data"}}}(jQuery);
